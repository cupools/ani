!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("preact"),require("velocity-animate"),require("velocity-animate/velocity.ui.min"),require("lodash")):"function"==typeof define&&define.amd?define(["preact","velocity-animate","velocity-animate/velocity.ui.min","lodash"],e):t.VelocityComponent=e(t.preact,t.Velocity,null,t.lodash)}(this,function(t,e,o,n){"use strict";e="default"in e?e.default:e;var i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},a=function(t,e){var o={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};console.log(e.RegisterEffect);var p=function(o){function p(){return i(this,p),s(this,o.apply(this,arguments))}return r(p,o),p.prototype.componentDidMount=function(){this.runAnimation(),!this.props.runOnMount},p.prototype.componentWillUnmount=function(){this._stopAnimation(),this._clearVelocityCache(this._getDOMTarget())},p.prototype.componentWillUpdate=function(t){n.isEqual(t.keyframes,this.props.keyframes)||(this._stopAnimation(),this._scheduleAnimation())},p.prototype.runAnimation=function(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.props.keyframes){var n=this._getDOMTarget();this._shouldRunAnimation=!1,o.stop?e(n,"stop",!0):o.finish&&e(n,"finishAll",!0);var i=this.props,r=i.keyframes,s=a(i,["keyframes"]);e(this._getDOMTarget(),s,{duration:0}),r.forEach(function(o){var n=o.duration,i=void 0===n?0:n,r=o.delay,s=void 0===r?0:r,p=o.easing,u=void 0===p?"linear":p,l=o.loop,c=void 0===l?0:l,f=o.complete,h=void 0===f?null:f,y=a(o,["duration","delay","easing","loop","complete"]);if(o.keyframes){var m="transition"+Math.random().toString().slice(2,10);e.RegisterEffect(m,{calls:o.keyframes.map(function(t){return[t,t.durationPercentage]}),loop:c}),e(t._getDOMTarget(),m,{duration:i,delay:s,easing:u,loop:c,complete:h})}else e(t._getDOMTarget(),y,{duration:i,delay:s,easing:u,loop:c,complete:h})})}},p.prototype._scheduleAnimation=function(){this._shouldRunAnimation||(this._shouldRunAnimation=!0,setTimeout(this.runAnimation.bind(this),0))},p.prototype._getDOMTarget=function(){return this.base},p.prototype._finishAnimation=function(){e(this._getDOMTarget(),"finishAll",!0)},p.prototype._stopAnimation=function(){e(this._getDOMTarget(),"stop",!0)},p.prototype._clearVelocityCache=function(t){t.length?t.forEach(this._clearVelocityCache):e.Utilities.removeData(t,["velocity","fxqueue"])},p.prototype.render=function(){return this.props.children.length?this.props.children[0]:t.h("span",this.props)},p.prototype.getDefaultProps=function(){return{animation:null,runOnMount:!1}},p}(t.Component);return p});
//# sourceMappingURL=velocity-component.js.map
